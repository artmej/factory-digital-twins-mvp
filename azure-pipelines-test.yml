# Test Pipeline - Factory Digital Twins
# Pipeline bÃ¡sico para diagnÃ³stico

trigger:
  branches:
    include:
      - main

variables:
  vmImageName: 'ubuntu-latest'

stages:
- stage: Test
  displayName: 'Test Stage'
  jobs:
  - job: TestJob
    displayName: 'Test Job'
    pool:
      vmImage: $(vmImageName)
    
    steps:
    - script: |
        echo "ğŸ§ª Testing basic pipeline functionality..."
        echo "Current directory: $(pwd)"
        echo "Files in workspace:"
        ls -la
        echo "âœ… Basic test completed"
      displayName: 'Basic Test'
    
    - script: |
        echo "ğŸ” Testing Azure CLI availability..."
        az version
        echo "âœ… Azure CLI test completed"
      displayName: 'Azure CLI Test'

    - task: AzureCLI@2
      displayName: 'Test Service Connection'
      inputs:
        azureSubscription: 'factory-service-connection'
        scriptType: 'bash'
        scriptLocation: 'inlineScript'
        inlineScript: |
          echo "ğŸ” Testing service connection..."
          az account show
          az group list --output table
          echo "âœ… Service connection test completed"